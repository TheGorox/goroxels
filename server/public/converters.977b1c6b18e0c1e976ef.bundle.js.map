{"version":3,"file":"converters.977b1c6b18e0c1e976ef.bundle.js","mappings":";;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;ACAA,iEAAe,qBAAuB,oBAAoB,E;;;;;;;;;;;;;;;ACA1D,iEAAe,qBAAuB,qBAAqB,E;;;;;;;;;;;;;;;ACA3D,iEAAe,qBAAuB,sBAAsB,E;;;;;;;;;;;;;;;ACA5D,iEAAe,qBAAuB,qBAAqB,E;;;;;;;;;;ACA3D,YAAY,YAAY;AACxB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,IAAI;;AAEJ,sB;;;;;;;;;;;;;;;;;;;AChBA;AACA;AACqC;AACN;AAC/B;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qDAAgB,oBAAoB;AACtD,SAAS,qDAAgB,yBAAyB;AAClD;AACA;AACA;AACA,oBAAoB,uDAAkB,oBAAoB;AAC1D,SAAS,uDAAkB,yBAAyB;AACpD;AACA;AACA;AACA;AACA,oBAAoB,2DAAsB;AAC1C;AACA;AACA,KAAK,MAAM,2DAAsB;AACjC;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,oBAAoB,2DAAsB;AAC1C;AACA;AACA,KAAK,MAAM,2DAAsB;AACjC;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,gBAAgB,sDAAiB;AACjC;AACA;AACA,KAAK,MAAM,sDAAiB;AAC5B;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,gBAAgB,2DAAsB;AACtC;AACA;AACA,KAAK,MAAM,2DAAsB;AACjC;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,uDAAgB;AAC9D,gDAAgD,yDAAkB;AAClE,6CAA6C,0DAAmB;AAChE;AACA;AACA;AACA;AACA,mCAAmC,uDAAgB;AACnD,qCAAqC,6DAAsB;AAC3D,qCAAqC,6DAAsB;AAC3D,iCAAiC,wDAAiB;AAClD,gCAAgC,yDAAkB;AAClD,iCAAiC,6DAAsB;AACvD,4BAA4B,uDAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,CAAC;AACtB;AACA;AACA;AACA,wBAAwB,YAAY;AACpC;AACA;AACA;AACA;AACA,iCAAiC,YAAY;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,yDAAoB;AAClD;AACA;AACA;AACA;AACA,iCAAiC,sDAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,yDAAoB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sDAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,uDAAK;AACvB;AACA;AACA;AACA;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,OAAO;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,sDAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,uDAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oBAAoB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C,4BAA4B,uBAAuB;AACnD,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,qDAAgB;AACnD,mCAAmC,qDAAgB;AACnD,qBAAqB;AACrB,mCAAmC,uDAAkB;AACrD,mCAAmC,uDAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;AC9aO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEO;AACP;AACA;AACA;;;;;;;;;;;;;;;;AC9BO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA,4B;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8FAA8F;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,SAAS,GAAG,UAAU,IAAI,cAAc,MAAM;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,MAAM;AACxD,uCAAuC,6DAA6D;AACpG,sCAAsC,8DAA8D;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,4DAA4D,MAAM;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,CAAC;AACd,UAAU,CAAC;AACX,UAAU,CAAC;AACX,UAAU;AACV,UAAU,CAAC;AACX,UAAU,CAAC,oCAAoC,CAAC,iCAAiC,CAAC;AAClF,sBAAsB,CAAC,4BAA4B,CAAC;AACpD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+DAA+D,gCAAgC,gBAAgB,OAAO,SAAS,0BAA0B,oBAAoB,mBAAmB,yBAAyB,eAAe,kBAAkB,qBAAqB,cAAc,YAAY,aAAa,gBAAgB,wDAAwD,kCAAkC,2BAA2B,sBAAsB,mBAAmB,uEAAuE,yBAAyB,aAAa,mBAAmB,UAAU,QAAQ,oFAAoF,yBAAyB,aAAa,mBAAmB,UAAU,QAAQ,0EAA0E,qCAAqC,WAAW,aAAa,mBAAmB,sBAAsB,qBAAqB,2CAA2C,YAAY,YAAY,mBAAmB,qBAAqB,sBAAsB;AAC3lC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzIkC;;AAEJ;AACC;AACA;AACC;;AAER;;AAEU;AACW;AACd;AACgB;;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AAI,wDAAS;AACb,QAAQ,CAAC,kBAAkB,sDAAC;AAC5B,QAAQ,CAAC;;AAET;;AAEA;AACA,KAAK;AACL,CAAC;;AAED,CAAC;AACD;AACA,CAAC;;AAED,CAAC;AACD,IAAI,CAAC;AACL;AACA;AACA;AACA,CAAC;;AAED,CAAC;AACD;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,QAAQ,CAAC,kBAAkB,sDAAC;AAC5B,QAAQ,CAAC;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,eAAe,CAAC;AAChB,QAAQ,CAAC;AACT;AACA,mBAAmB,MAAM,OAAO,sDAAC;AACjC;;AAEA;AACA;AACA,UAAU;AACV,mBAAmB,MAAM,OAAO,sDAAC;AACjC;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAU;AACV,mBAAmB,MAAM,OAAO,sDAAC;AACjC;;AAEA,QAAQ,MAAM,SAAS,sDAAC;AACxB;;;;AAIA,oBAAoB,MAAM;AAC1B;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA,qDAAqD,yBAAyB;AAC9E;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,MAAM,YAAY,sDAAC,aAAa,EAAE,gCAAgC;AAC1F,qBAAqB;AACrB,cAAc;AACd;AACA;AACA,SAAS;AACT;;AAEA;AACA,QAAQ,MAAM,OAAO,sDAAC;AACtB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qCAAqC,mBAAmB;AACxD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,CAAC;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;A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A;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,CAAC;;AAED;AACA,IAAI,CAAC;AACL;;AAEA;AACA,CAAC;AACD;AACA;AACA;;AAEA,0BAA0B,CAAC;AAC3B;AACA,IAAI,CAAC;AACL,CAAC;AACD,CAAC;AACD;AACA;;AAEA,0BAA0B,CAAC;AAC3B;AACA,IAAI,CAAC;AACL,CAAC;;AAED,CAAC;AACD,mCAAmC,CAAC;AACpC;AACA;AACA,CAAC;;;;AAID;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,gDAAQ,aAAa,CAAC,sB;;;;;;;;;;;;;;;AChrC9C,iEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;ACrCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAe,S;;;;;;;;;;;;;;;;;AChCf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT,MAAM;AACN,QAAQ,MAAM;AACd;AACA;;;AAGA,iEAAe,Q;;;;;;;;;;;;;;;;ACzKR;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,4BAA4B,sBAAsB;AAClD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,0BAA0B;AAC1B;AACA;AACA,yCAAyC;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;;AAEA;AACA;AACA;;AAEA,aAAa;AACb;;;;;;;;;;;AC3GA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C,uBAAuB;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,MAAM;AACN;AACA;;AAEA,MAAM;AACN;AACA;;AAEA,MAAM;AACN;AACA;;AAEA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA,CAAC,sCAAsC,qBAAM,0BAA0B,qBAAM,U;;;;;;UCzL7E;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC/BA;WACA;WACA,E;;;;;WCFA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,E;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC,I;;;;;WCPD,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;WCNA,2B;;;;;WCAA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA,4G;;;;;UEhDA;UACA;UACA;UACA;UACA","sources":["webpack://goroxels-client/./src/css/converters.css","webpack://goroxels-client/./src/img/folder.png","webpack://goroxels-client/./src/img/palette.png","webpack://goroxels-client/./src/img/palette2.png","webpack://goroxels-client/./src/img/pattern.png","webpack://goroxels-client/./src/js/convert/converterWASM.js","webpack://goroxels-client/./src/js/convert/ditherer.js","webpack://goroxels-client/./src/js/convert/dom.js","webpack://goroxels-client/./src/js/convert/imgur.js","webpack://goroxels-client/./src/js/convert/imgzoom.js","webpack://goroxels-client/./src/js/convert/main.js","webpack://goroxels-client/./src/js/convert/matrices/errorDiffusion.js","webpack://goroxels-client/./src/js/convert/openImage.js","webpack://goroxels-client/./src/js/convert/palettes.js","webpack://goroxels-client/./src/js/convert/resize.js","webpack://goroxels-client/./src/js/convert/setImmediate.js","webpack://goroxels-client/webpack/bootstrap","webpack://goroxels-client/webpack/runtime/amd define","webpack://goroxels-client/webpack/runtime/chunk loaded","webpack://goroxels-client/webpack/runtime/compat get default export","webpack://goroxels-client/webpack/runtime/define property getters","webpack://goroxels-client/webpack/runtime/global","webpack://goroxels-client/webpack/runtime/hasOwnProperty shorthand","webpack://goroxels-client/webpack/runtime/make namespace object","webpack://goroxels-client/webpack/runtime/publicPath","webpack://goroxels-client/webpack/runtime/jsonp chunk loading","webpack://goroxels-client/webpack/before-startup","webpack://goroxels-client/webpack/startup","webpack://goroxels-client/webpack/after-startup"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","export default __webpack_public_path__ + \"/img/folder.png\";","export default __webpack_public_path__ + \"/img/palette.png\";","export default __webpack_public_path__ + \"/img/palette2.png\";","export default __webpack_public_path__ + \"/img/pattern.png\";","// import { converter } from \"../../../lib/converter/bin/converter\"\n// import wasmConverter from \"../../../lib/converter/bin/converter.wasm\"\n\n// // Since webpack will change the name and potentially the path of the\n// // `.wasm` file, we have to provide a `locateFile()` hook to redirect\n// // to the appropriate URL.\n// // More details: https://kripken.github.io/emscripten-site/docs/api_reference/module.html\n// const wasm = converter({\n//   locateFile(path) {\n//     if (path.endsWith(`.wasm`)) {\n//       return wasmConverter\n//     }\n//     return path\n//   },\n// })\n\n// export default wasm","// src/dithering.js\r\n\r\nimport bayer from './matrices/bayer';\r\nimport clrManip from './color';\r\n\r\nexport class Ditherer {\r\n    constructor(paletteRGB, colorFunc = 'lwrgbde') {\r\n        this.paletteRGB = paletteRGB;\r\n        this.colorFunc = colorFunc;\r\n        this.usedColors = new Map();\r\n\r\n        this.updatePaletteDerived();\r\n\r\n        // ===== deltaE range smoke tests =====\r\n\r\n// RGB → RGB\r\nconsole.log(\r\n  `lwrgbde: min=${clrManip.lwrgbde([0,0,0], [0,0,0])} ` +\r\n  `max=${clrManip.lwrgbde([0,0,0], [255,255,255])}`\r\n);\r\n\r\nconsole.log(\r\n  `euclidian: min=${clrManip.euclidian([0,0,0], [0,0,0])} ` +\r\n  `max=${clrManip.euclidian([0,0,0], [255,255,255])}`\r\n);\r\n\r\n// RGB → LAB\r\nconsole.log(\r\n  `ciede1994: min=${clrManip.mciede1994mix(\r\n    [0,0,0],\r\n    [0,0,0]\r\n  )} max=${clrManip.mciede1994mix(\r\n    [0,0,0],\r\n    [100,0,0]\r\n  )}`\r\n);\r\n\r\nconsole.log(\r\n  `ciede2000: min=${clrManip.mciede2000mix(\r\n    [0,0,0],\r\n    [0,0,0]\r\n  )} max=${clrManip.mciede2000mix(\r\n    [0,0,0],\r\n    [100,0,0]\r\n  )}`\r\n);\r\n\r\nconsole.log(\r\n  `cmcic: min=${clrManip.cmcicMix(\r\n    [0,0,0],\r\n    [0,0,0]\r\n  )} max=${clrManip.cmcicMix(\r\n    [0,0,0],\r\n    [100,0,0]\r\n  )}`\r\n);\r\n\r\n// RGB → OKLab\r\nconsole.log(\r\n  `oklab: min=${clrManip.mOklabDiffMix(\r\n    [0,0,0],\r\n    [0,0,0]\r\n  )} max=${clrManip.mOklabDiffMix(\r\n    [0,0,0],\r\n    [1,0,0]\r\n  )}`\r\n);\r\n\r\n// ===================================\r\n\r\n    }\r\n\r\n    setPalette(paletteRGB) {\r\n        this.paletteRGB = paletteRGB;\r\n        this.usedColors.clear();\r\n        this.updatePaletteDerived();\r\n    }\r\n\r\n    setColorFunc(colorFunc) {\r\n        this.colorFunc = colorFunc;\r\n        this.usedColors.clear();\r\n        this.updatePaletteDerived();\r\n    }\r\n\r\n    updatePaletteDerived() {\r\n        this.paletteLAB = this.paletteRGB.map(clrManip.rgb2lab);\r\n        this.paletteOKLab = this.paletteRGB.map(clrManip.rgb2okLAB);\r\n        this.palette32 = this.paletteRGB.map(clrManip.rgb2uint32);\r\n    }\r\n\r\n    get deFunction() {\r\n        switch (this.colorFunc) {\r\n            case 'lwrgbde': return clrManip.lwrgbde;\r\n            case 'ciede1994': return clrManip.mciede1994mix;\r\n            case 'ciede2000': return clrManip.mciede2000mix;\r\n            case 'cmcic': return clrManip.cmcicMix;\r\n            case 'eucl': return clrManip.euclidian;\r\n            case 'oklab': return clrManip.mOklabDiffMix;\r\n            default: return clrManip.lwrgbde;\r\n        }\r\n    }\r\n\r\n    get curPaletteSpace() {\r\n        switch (this.colorFunc) {\r\n            case 'ciede1994':\r\n            case 'ciede2000':\r\n            case 'cmcic':\r\n                return 'lab';\r\n            case 'oklab':\r\n                return 'oklab';\r\n            default:\r\n                return 'rgb';\r\n        }\r\n    }\r\n\r\n    get palette() {\r\n        switch (this.colorFunc) {\r\n            case 'ciede1994':\r\n            case 'ciede2000':\r\n            case 'cmcic':\r\n                return this.paletteLAB;\r\n            case 'oklab':\r\n                return this.paletteOKLab;\r\n            default:\r\n                return this.paletteRGB;\r\n        }\r\n    }\r\n\r\n    * errorDiffusion(imageData, matrix = null) {\r\n        const width = imageData.width;\r\n        const height = imageData.height;\r\n        const imgData = imageData.data;\r\n        const buf32 = new Uint32Array(imgData.buffer);\r\n\r\n        const serp = $('#serp')[0].checked;\r\n        let dir = 1;\r\n        let cntr = 0;\r\n\r\n        for (let y = 0; y < height; y++) {\r\n            const startX = dir > 0 ? 0 : width - 1;\r\n            const endX = dir > 0 ? width : -1;\r\n            const step = dir;\r\n\r\n            for (let x = startX; x !== endX; x += step) {\r\n                const i = x + y * width;\r\n                const col32 = buf32[i];\r\n\r\n                if ((col32 >> 24) === 0) {\r\n                    buf32[i] = 0;\r\n                    continue;\r\n                }\r\n\r\n                const color = clrManip.uint32toRGB(col32);\r\n                const rgbKey = col32 & 0xffffff;\r\n\r\n                let matchIndex = this.usedColors.get(rgbKey);\r\n                if (matchIndex === undefined) {\r\n                    matchIndex = clrManip.mapcolor(color, this.palette, this.deFunction);\r\n                    this.usedColors.set(rgbKey, matchIndex);\r\n                }\r\n\r\n                const matchingColor = this.paletteRGB[matchIndex];\r\n                const matchingColor32 = this.palette32[matchIndex];\r\n\r\n                buf32[i] = matchingColor32;\r\n\r\n                if (matrix) {\r\n                    const dist = [\r\n                        color[0] - matchingColor[0],\r\n                        color[1] - matchingColor[1],\r\n                        color[2] - matchingColor[2]\r\n                    ];\r\n\r\n                    for (let j = dir > 0 ? 0 : matrix.length - 1;\r\n                        dir > 0 ? j < matrix.length : j >= 0;\r\n                        j += dir) {\r\n                        const [mult, dx, dy] = matrix[j];\r\n                        const nx = x + dx * dir;\r\n                        const ny = y + dy;\r\n\r\n                        if (nx < 0 || nx >= width || ny < 0 || ny >= height) continue;\r\n\r\n                        const ni = nx + ny * width;\r\n                        const neighborColor = clrManip.uint32toRGB(buf32[ni]);\r\n\r\n                        const I = ni * 4;\r\n                        imgData[I] = Math.max(0, Math.min(255, neighborColor[0] + dist[0] * mult));\r\n                        imgData[I + 1] = Math.max(0, Math.min(255, neighborColor[1] + dist[1] * mult));\r\n                        imgData[I + 2] = Math.max(0, Math.min(255, neighborColor[2] + dist[2] * mult));\r\n                    }\r\n                }\r\n\r\n                if (++cntr % 2000 === 0) {\r\n                    yield cntr / (width * height);\r\n                }\r\n            }\r\n\r\n            if (serp) dir *= -1;\r\n        }\r\n\r\n        return imageData;\r\n    }\r\n\r\n    * checkboardDithering(imageData, palUtils) {\r\n        const width = imageData.width;\r\n        const imgData = imageData.data;\r\n        let cntr = 0;\r\n\r\n        const deFunction = this.deFunction;\r\n\r\n        let paletteMixed = palUtils.colorValuesExRGB;\r\n        switch (this.colorFunc) {\r\n            case 'ciede2000':\r\n            case 'cmcic':\r\n                paletteMixed = palUtils.colorValuesExLab;\r\n                break\r\n            case 'oklab':\r\n                paletteMixed = palUtils.colorValuesExOkLab;\r\n                break\r\n        }\r\n\r\n        for (let i = 0; i < imgData.length; i += 4) {\r\n            if (imgData[i + 3] <= 127) {\r\n                console.log('LOOOL');\r\n                imgData[i] = imgData[i + 1] = imgData[i + 2] = imgData[i + 3] = 0;\r\n                continue;\r\n            }\r\n\r\n            const color = [imgData[i], imgData[i + 1], imgData[i + 2]];\r\n            const rgbKey = (color[0] << 16) | (color[1] << 8) | color[2];\r\n\r\n            let matchIndex = this.usedColors.get(rgbKey);\r\n            if (matchIndex === undefined) {\r\n                matchIndex = clrManip.mapcolor(color, paletteMixed, deFunction);\r\n                this.usedColors.set(rgbKey, matchIndex);\r\n            }\r\n\r\n            const [col1Idx, col2Idx] = [\r\n                palUtils.colorValuesExRGB[matchIndex][3],\r\n                palUtils.colorValuesExRGB[matchIndex][4]\r\n            ];\r\n\r\n            const pixelParity = (((i / 4) % width) + Math.floor((i / 4) / width)) % 2;\r\n            const finalIndex = pixelParity === 0 ? col1Idx : col2Idx;\r\n\r\n            const finalColor = this.paletteRGB[finalIndex];\r\n            imgData[i] = finalColor[0];\r\n            imgData[i + 1] = finalColor[1];\r\n            imgData[i + 2] = finalColor[2];\r\n            imgData[i + 3] = 255;\r\n\r\n            if (++cntr % 2000 === 0) {\r\n                yield cntr / (imgData.length / 4);\r\n            }\r\n        }\r\n\r\n        return imageData;\r\n    }\r\n\r\n    * orderedDithering(imageData, matrixSize, custom = false, mode = 1, strength = 100,) {\r\n        const M = bayer[custom ? ('c' + matrixSize) : matrixSize];\r\n        const max = M.length ** 2;\r\n        const width = imageData.width;\r\n        const imgData = imageData.data;\r\n        let cntr = 0;\r\n\r\n        for (let i = 0; i < imgData.length; i += 4) {\r\n            if (imgData[i + 3] <= 127) {\r\n                imgData[i] = imgData[i + 1] = imgData[i + 2] = imgData[i + 3] = 0;\r\n                continue;\r\n            }\r\n\r\n            const offset = i / 4;\r\n            const x = offset % width;\r\n            const y = (offset / width) | 0;\r\n            let bayerVal = M[x % matrixSize][y % matrixSize];\r\n\r\n            let normalized = (bayerVal + 0.5) / max;\r\n            if (mode === 0) normalized *= -1;\r\n            else if (mode === 2) normalized -= 0.5;\r\n\r\n            for (let j = 0; j < 3; j++) {\r\n                imgData[i + j] = Math.max(0, Math.min(255, imgData[i + j] + normalized * strength));\r\n            }\r\n\r\n            const color = [imgData[i], imgData[i + 1], imgData[i + 2]];\r\n            const rgbKey = (color[0] << 16) | (color[1] << 8) | color[2];\r\n\r\n            let matchIndex = this.usedColors.get(rgbKey);\r\n            if (matchIndex === undefined) {\r\n                matchIndex = clrManip.mapcolor(color, this.palette, this.deFunction);\r\n                this.usedColors.set(rgbKey, matchIndex);\r\n            }\r\n\r\n            const finalColor = this.paletteRGB[matchIndex];\r\n            imgData[i] = finalColor[0];\r\n            imgData[i + 1] = finalColor[1];\r\n            imgData[i + 2] = finalColor[2];\r\n            imgData[i + 3] = 255;\r\n\r\n            if (++cntr % 2000 === 0) {\r\n                yield cntr / (imgData.length / 4);\r\n            }\r\n        }\r\n\r\n        return imageData;\r\n    }\r\n\r\n    * yliluoma1Ordered(imageData, matrixSize, custom = false) {\r\n        const M = bayer[custom ? ('c' + matrixSize) : matrixSize];\r\n        const max = matrixSize * matrixSize;\r\n        const width = imageData.width;\r\n        const imgData = imageData.data;\r\n\r\n        const de = this.deFunction;\r\n        const paletteRGB = this.paletteRGB;\r\n        const paletteSpace = this.curPaletteSpace;\r\n\r\n        const mixingPlans = this.computeYuliomaMixingPlans(\r\n            paletteRGB,\r\n            paletteSpace,\r\n            matrixSize,\r\n            de\r\n        );\r\n\r\n        const planCache = new Map();\r\n        let cntr = 0;\r\n\r\n        for (let i = 0; i < imgData.length; i += 4) {\r\n            if (imgData[i + 3] <= 127) {\r\n                imgData[i] = imgData[i + 1] = imgData[i + 2] = imgData[i + 3] = 0;\r\n                continue;\r\n            }\r\n\r\n            const offset = i / 4;\r\n            const x = offset % width;\r\n            const y = (offset / width) | 0;\r\n\r\n            const factor = (M[x % matrixSize][y % matrixSize] + 0.5) / max;\r\n\r\n            const rgb = [imgData[i], imgData[i + 1], imgData[i + 2]];\r\n            const rgbKey = (rgb[0] << 16) | (rgb[1] << 8) | rgb[2];\r\n\r\n            let plan = planCache.get(rgbKey);\r\n            if (!plan) {\r\n                let bestErr = Infinity;\r\n                let bestPlan = null;\r\n\r\n                for (let p of mixingPlans) {\r\n                    const err = de(rgb, p.mixColor);\r\n                    if (err < bestErr) {\r\n                        bestErr = err;\r\n                        bestPlan = p;\r\n                    }\r\n                }\r\n                plan = bestPlan;\r\n                planCache.set(rgbKey, plan);\r\n            }\r\n\r\n            const idx = factor < plan.ratio ? plan.c2 : plan.c1;\r\n            const out = paletteRGB[idx];\r\n\r\n            imgData[i] = out[0];\r\n            imgData[i + 1] = out[1];\r\n            imgData[i + 2] = out[2];\r\n            imgData[i + 3] = 255;\r\n\r\n            if (++cntr % 2000 === 0) {\r\n                yield cntr / (imgData.length / 4);\r\n            }\r\n        }\r\n\r\n        return imageData;\r\n\r\n    }\r\n\r\n\r\n    computeYuliomaMixingPlans(paletteRGB, paletteSpace, order, de) {\r\n        const plans = [];\r\n        const nn = order * order;\r\n\r\n        for (let i = 0; i < paletteRGB.length; i++) {\r\n            for (let j = i; j < paletteRGB.length; j++) {\r\n                for (let r = 0; r < nn; r++) {\r\n                    if (i === j && r !== 0) break;\r\n\r\n                    const ratio = r / nn;\r\n\r\n                    const c1 = paletteRGB[i];\r\n                    const c2 = paletteRGB[j];\r\n                    \r\n                    const mixRGB = [\r\n                        c1[0] + ratio * (c2[0] - c1[0]),\r\n                        c1[1] + ratio * (c2[1] - c1[1]),\r\n                        c1[2] + ratio * (c2[2] - c1[2])\r\n                    ].map(v => v | 0);\r\n\r\n                    let mixColor = mixRGB;\r\n                    let c2Spaced = c2;\r\n                    let errorScale\r\n                    if(paletteSpace === 'lab'){\r\n                        mixColor = clrManip.rgb2lab(mixRGB);\r\n                        c2Spaced = clrManip.rgb2lab(c2);\r\n                    }else if(paletteSpace === 'oklab'){\r\n                        mixColor = clrManip.rgb2okLAB(mixRGB);\r\n                        c2Spaced = clrManip.rgb2okLAB(c2);\r\n                    }\r\n\r\n                    // all deltaE funcs taking rgb color as 1st argument and \r\n                    // their own colorspace color as second\r\n                    const diff = de(c1, c2Spaced)\r\n\r\n                    plans.push({\r\n                        c1: i,\r\n                        c2: j,\r\n                        ratio,\r\n                        mixRGB,\r\n                        mixColor\r\n                        \r\n                    });\r\n                }\r\n            }\r\n        }\r\n        return plans;\r\n\r\n        function calcMixingError(c1, c2, de){\r\n            const rawDiff = de(c1, c2);\r\n\r\n        }\r\n    }\r\n}","export function watchInput(inputElement, callback) {\n    inputElement.addEventListener('input', (event) => {\n        callback(event.target.value);\n    });  \n    \n    return new Proxy(inputElement, {\n        set(target, property, value) {\n            if (property === 'value') {\n                const oldValue = target.value;\n                target[property] = value;\n                if (oldValue !== value) {\n                    callback(value);\n                }\n                return true;\n            }\n            target[property] = value;\n            return true;\n        },\n        get(target, property) {\n            if (property === 'value') {\n                return target.value;\n            }\n            return target[property];\n        }\n    });\n}\n\nexport function linkNumberRangeInputs(numberInp, rangeInp) {\n    numberInp.addEventListener('input', e => rangeInp.value = e.target.value);\n    rangeInp.addEventListener('input', e => numberInp.value = e.target.value);\n}\n","export async function upload(image){\n    const formData = new FormData();\n    formData.append('image', image);\n    formData.append('type', 'base64');\n\n    const resp = await fetch('https://api.imgur.com/3/image', {\n        method: 'POST',\n        headers: {\n            'Authorization': 'Client-ID 134a48816a3c4d6'\n        },\n        body: formData,\n        redirect: 'follow'\n    })\n    const json = await resp.json();\n    if(!json.success) throw new Error('Imgur upload eror');\n\n    return json.data.link;\n}\n\nwindow.imgurUpload = upload;","// Нагло спизжено у pxlsfiddle\n// Модифицировано\nconst imgZoom = {\n    dlg: null,\n    canvas: null,\n    scaleLabel: null,\n    customLabel: null,\n  \n    scales: [2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 17, 20, 24, 28, 32], // empirically determined; originally 17 was 16, but a simple polynomial of n=3 fit showed that value was an outlier. So is 8, but by half, and scaling non-integer? no thanks.\n    scaleIndex: 2, // scale = 4\n  \n    src: null,\n  \n    // get the mouse position relative to an image based on its original size\n    getImgMousePos(element, e) {\n      const rect = element.getBoundingClientRect();\n      const style = getComputedStyle(element);\n      const paddingRect = {\n        left: parseInt(style.paddingLeft, 10),\n        right: parseInt(style.paddingRight, 10),\n        top: parseInt(style.paddingTop, 10),\n        bottom: parseInt(style.paddingBottom, 10)\n      };\n  \n      return {\n        x: (e.clientX - rect.left - paddingRect.left) / (rect.width - (paddingRect.left + paddingRect.right)) * element.naturalWidth,\n        y: (e.clientY - rect.top - paddingRect.top) / (rect.height - (paddingRect.top + paddingRect.bottom)) * element.naturalHeight\n      };\n    },\n  \n    // sets up event handlers for a given image element to pop up the zoom window\n    createZoomHandler(el, cb) {\n      el.onmouseenter = function () {\n        imgZoom.src = el;\n        const scale = imgZoom.scales[imgZoom.scaleIndex];\n        imgZoom.scaleLabel.textContent = `${el.width}x${el.height}px; pixel zoom x${scale}`;\n        imgZoom.canvas.width = el.naturalWidth;\n        imgZoom.canvas.height = el.naturalHeight;\n        imgZoom.canvas.getContext(\"2d\").drawImage(el, 0, 0);\n        imgZoom.dlg.style.display = \"block\";\n      };\n      el.onmouseleave = function () {\n        imgZoom.src = null;\n        imgZoom.customLabel.style.display = \"none\";\n        imgZoom.dlg.style.display = \"none\";\n      };\n      el.onmousemove = function (e) {\n        const scale = imgZoom.scales[imgZoom.scaleIndex];\n  \n        const mousePos = imgZoom.getImgMousePos(el, e);\n        imgZoom.canvas.style.transform = `scale(${scale})`;\n        imgZoom.canvas.style.left = `${imgZoom.dlg.offsetWidth / 2 - mousePos.x * scale - scale / 2}px`;\n        imgZoom.canvas.style.top = `${imgZoom.dlg.offsetHeight / 2 - mousePos.y * scale - scale / 2}px`;\n  \n        if (typeof cb !== \"undefined\") {\n          cb(el, mousePos, scale);\n  \n          return true;\n        }\n  \n        return true;\n      };\n      el.onwheel = function (e) {\n        if (e.altKey) {\n          if (e.deltaY < 0) {\n            imgZoom.scaleIndex = Math.min(imgZoom.scaleIndex + 1, imgZoom.scales.length - 1);\n          } else if (e.deltaY > 0) {\n            imgZoom.scaleIndex = Math.max(imgZoom.scaleIndex - 1, 0);\n          }\n          if (e.deltaY !== 0) {\n            const scale = imgZoom.scales[imgZoom.scaleIndex];\n            imgZoom.scaleLabel.textContent = `pixel zoom x${scale}`;\n            el.onmousemove(e);\n          }\n          e.preventDefault();\n        }\n      };\n      el.onclick = () => {\n        if (!$(el).hasClass('zoomed')) {\n          $(el).addClass('zoomed');\n          $(el).css('width', '');\n        } else {\n          $(el).removeClass('zoomed');\n          $(el).css('width', Math.min(parseInt($(el).parent().css('width')) / 2, $(el)[0].width));\n          console.log($(el).parent().css('width'), $(el).parent(), 2)\n        }\n      }\n    },\n    refresh() {\n      // imgZoom.canvas.width = imgZoom.src.width;\n      // imgZoom.canvas.height = imgZoom.src.height;\n      if (typeof imgZoom.src.naturalWidth !== \"undefined\") {\n        imgZoom.canvas.width = imgZoom.src.naturalWidth;\n        imgZoom.canvas.height = imgZoom.src.naturalHeight;\n      } else {\n        imgZoom.canvas.width = imgZoom.src.width;\n        imgZoom.canvas.height = imgZoom.src.height;\n      }\n      imgZoom.canvas.getContext(\"2d\").drawImage(imgZoom.src, 0, 0);\n    },\n    init() {\n      const tmp = document.createElement(\"template\");\n      tmp.innerHTML = `<div id=\"_imgZoom\" style=\"z-index:1555; background-color:rgba(0,0,0,0); position:fixed; top:0; right:0; border-width:0 0 2px 2px; border-style:solid; border-color:#000; border-radius:0 0 0 5px; padding:0 2px; text-align:right; pointer-events:none; display:none; width:50vw; height:50vh; overflow:hidden;\"><canvas id=\"_imgZoomCanvas\" style=\"position:absolute; image-rendering:-moz-crisp-edges; image-rendering:pixelated; transform-origin:0 0; transform:scale(4);\"></canvas><strong id=\"_imgZoomLevel\" style=\"background-color:#404040; border-radius:5px 0 0 0; padding:2px; position:absolute; bottom:0; right:0;\">pixel zoom x4</strong><strong id=\"_imgZoomLabel\" style=\"background-color:#404040; border-radius:0 5px 0 0; padding:2px; position:absolute; bottom:0; left:0; max-width:300px\"></strong><div id=\"_imgZoomCrosshair\" style=\"opacity:0.25;\"><div style=\"background-color:#000; width:2px; height:20px; position:absolute; top:calc(50% - 10px); left:calc(50% - 1px);\"></div><div style=\"background-color:#000; height:2px; width:20px; position:absolute; top:calc(50% - 1px); left:calc(50% - 10px);\"></div></div></div>`;\n      this.dlg = tmp.content.firstChild;\n      document.body.appendChild(this.dlg);\n      this.canvas = document.getElementById(\"_imgZoomCanvas\");\n      this.scaleLabel = document.getElementById(\"_imgZoomLevel\");\n      this.customLabel = document.getElementById(\"_imgZoomLabel\");\n  \n      // zoom handlers for pixel images\n      const pixelImages = document.querySelectorAll(\".zoom\");\n      for (const imgElement of pixelImages) {\n        this.createZoomHandler(imgElement);\n      }\n  \n      // zoom handlers for future pixel images\n      function cb(mutations) {\n        for (const mut of mutations) {\n          for (const addedNode of mut.addedNodes) {\n            if (addedNode.querySelectorAll) {\n              const zoomElements = addedNode.querySelectorAll(\"img.zoom\");\n              for (const el of zoomElements) {\n                imgZoom.createZoomHandler(el);\n              }\n            }\n          }\n        }\n      };\n      const observer = new MutationObserver(cb);\n      observer.observe(document.body, {\n        childList: true,\n        subtree: true\n      });\n    }\n  };\n  imgZoom.init();\n\n  module.exports = imgZoom","import '../../css/converters.css';\n\nimport '../../img/folder.png';\nimport '../../img/pattern.png';\nimport '../../img/palette.png';\nimport '../../img/palette2.png';\n\nimport './setImmediate';\n\nimport palettes from './palettes';\nimport converterWProm from './converterWASM';\nimport clrManip from './color';\nimport * as importedPatterns from './patterns';\n\nimport imgZoom from './imgzoom';\nimport openImage from './openImage';\nimport { isImagePixelArt, resizeCanvas } from './resize';\nimport { linkNumberRangeInputs } from './dom';\n\nimport { upload } from './imgur';\n\nimport { Ditherer } from './ditherer';\nimport errorDiffMatrices from './matrices/errorDiffusion';\n\nimport { init as initTranslates, translate as t } from '../translate';\nimport { processApiErrors } from '../utils/api';\nimport { sleep } from '../utils/misc';\n\n(async () => {\n    const module = await converterWProm;\n    window.convModule = module;\n    window.clrManip = clrManip;\n})();\n\n\ninitTranslates();\n\nlet resizeKeepAspectRatio = true;\n\n// автоматический корректор инпута\n$('input[type=number]').on('change', (e) => {\n    let input = e.target;\n\n    if (input.max) {\n        input.value = Math.min(input.value, input.max);\n    }\n\n    if (input.min) {\n        input.value = Math.max(input.value, input.min);\n    }\n});\n\nlet utils = {\n    // технически, любой путь подойдёт\n    isURLValid(url) {\n        if (!url || !url.length) return false;\n\n        try {\n            new URL(url);\n        } catch {\n            return false;\n        }\n\n        return true\n    },\n    isURLImage(url) {\n        return new RegExp('\\.(png|jpg|gif)$').test(url);\n    }\n}\n\nconst paletteSel = $('#paletteSel');\nfunction applyPalettes(selected) {\n    let paletteSelected = false;\n    Object.keys(palettes).forEach(key => {\n        const newEl = $(`<option id=\"p_${key}\">${key}</option>`);\n        newEl.val(key);\n\n        if (key === selected) {\n            paletteSelected = true;\n            newEl.attr('selected', '');\n            palUtils.setPalette(palettes[key]);\n        }\n\n\n        paletteSel.prepend(newEl);\n    });\n\n    // in case some palette was deleted\n    if (!paletteSelected) {\n        $('#p_goroxels1').attr('selected', '');\n        palUtils.setPalette(palettes['goroxels1']);\n    }\n    paletteSel.append('<option value=\"_custom\">custom</option>');\n}\n\npaletteSel.on('change', () => {\n    const val = paletteSel.val();\n\n    if (val === \"_custom\") {\n        $('#userPalette').show();\n    } else {\n        $('#userPalette').hide();\n\n        const pal = palettes[val];\n\n        localStorage.setItem('converterPalette', val);\n        palUtils.setPalette(pal);\n        palUtils.updatePalette();\n\n        visualizePalette();\n\n        converterPreload(false);\n    }\n\n    palUtils.usedColors = [];\n    patUtils.usedColors = [];\n});\n\n$('#userPalette').attr('placeholder',\n    '[[r, g, b],[r, g, b], ...] | [\"#hex\", \"#hex\", ...] | [[r, g, b], [\"#hex\"], ...]');\n$('#userPalette').on('input', () => {\n    tryParseUserPalette();\n    visualizePalette();\n});\n\nfunction visualizePalette() {\n    const pal = paletteRGB;\n\n    $('#palette').children().remove();\n\n    pal.forEach(col => {\n        const el = $(`<div class=\"paletteCol\" style=\"background-color:rgb(${col.join(',')})\"></div>`);\n        $('#palette').append(el);\n    });\n}\n\n\nfunction tryParseUserPalette() {\n    try {\n        let tempPal = JSON.parse($('#userPalette').val())\n\n        if (tempPal.length === 0)\n            throw new Error('Null palette length')\n\n        tempPal = tempPal.map(el => {\n            if (typeof el === 'string') { // hex\n                if (el.startsWith('#')) el = el.slice(1);\n\n                return clrManip.hex2rgb(el);\n            } else if (typeof el === 'object' && el.length === 3) { // rgb array\n                return el\n            }\n\n            throw new Error('Unknown color type')\n        })\n\n        palUtils.setPalette(tempPal);\n        palUtils.updatePalette();\n\n        converterPreload(false);\n    } catch (e) {\n        $('#userPalette').css('background-color', 'rgb(249,141,141)');\n        return\n    }\n    $('#userPalette').css('background-color', '')\n}\n\nlet paletteRGB,\n    paletteLAB,\n    paletteOKLab,\n    palette32;\n\nlet palUtils = {\n    // all the dithering happens in thing below (ditherer.js)\n    ditherer: null,\n    \n    colorValuesExRGB: [],\n    colorValuesExLab: [],\n    colorValuesExOkLab: [],\n\n    converterInterval: null,\n    usedColors: [],\n\n    setPalette(palette) {\n        paletteRGB = palette;\n        this.ditherer?.setPalette(palette);\n        this.updatePalette();\n    },\n    updatePalette() {\n        paletteLAB = paletteRGB.map(clrManip.rgb2lab);\n        paletteOKLab = paletteRGB.map(clrManip.rgb2okLAB);\n        palette32 = paletteRGB.map(clrManip.rgb2uint32);\n\n        this.ditherPalette();\n    },\n    ditherPalette() {\n        if ($('#ditheringMode').val() !== 'check') return;\n\n        // спи.. взято на вооружение!\n        this.colorValuesExRGB = [];\n        this.colorValuesExLab = [];\n        this.colorValuesExOkLab = [];\n\n        const isOklab = $('#colorfunc').val() === 'oklab';\n        const clrDiffFn = isOklab ? clrManip.mOklabDiff : clrManip.mciede2000;\n        const paletteWithL = isOklab ? paletteOKLab : paletteLAB;\n        // lab max diff is 120\n        // oklab max diff is ~1.509 \n        // but realistic max between oklab black/white is ~1.0\n        const thresMulti = isOklab ? 0.01 : 1.2\n\n        const threshold = +$('#palThresold').val() * thresMulti; // UI is presented as a range of 0..100, but ciede2000 maxes out at ~120.\n        paletteRGB.forEach((col1, col1idx) => {\n            paletteRGB.forEach((col2, col2idx) => {\n                if (col2idx >= col1idx) {\n                    if (clrDiffFn(col1, col2) <= threshold) {\n                        const mix = clrManip.mixColors(col1, col2);\n                        const col1lab = paletteWithL[col1idx];\n                        const col2lab = paletteWithL[col2idx];\n                        if (col1lab[0] >= col2lab[0]) { // put lighter colors first regardless of combo\n                            this.colorValuesExRGB.push([mix[0], mix[1], mix[2], col1idx, col2idx]);\n                        } else {\n                            this.colorValuesExRGB.push([mix[0], mix[1], mix[2], col2idx, col1idx]);\n                        }\n                    }\n                }\n            });\n        });\n        this.colorValuesExRGB.forEach((val, idx) => {\n            if (isOklab) {\n                this.colorValuesExOkLab[idx] = clrManip.rgb2okLAB(val.map(x => x | 0));\n\n                this.colorValuesExOkLab[idx][3] = val[3];\n                this.colorValuesExOkLab[idx][4] = val[4];\n\n            } else {\n                this.colorValuesExLab[idx] = clrManip.rgb2lab(val);\n                this.colorValuesExLab[idx][3] = val[3];\n                this.colorValuesExLab[idx][4] = val[4];\n            }\n        });\n    }\n}\n\nlet palImageChanged = false;\n$('#palFolder').on('click', () => {\n    openImage(dataURL => {\n        palImageChanged = true;\n        $('#palInput').val(t('[file]'));\n        $('#palInput').data('source', 'dataURL');\n\n        palUtils.dataURL = dataURL;\n\n        converterPreload();\n    })\n})\n\n$('#palGOBtn').on('click', () => {\n    converterPreload();\n});\n\n$('#palInput').on('keydown', (e) => {\n    $('#palInput')[0].dataset.source = \"url\";\n    if (e.code === 'Enter') {\n        converterPreload();\n    } else {\n        palImageChanged = true;\n    }\n});\n\n$('#ditheringMode').on('change', () => {\n    let val = $('#ditheringMode').val();\n\n    if (val === 'ordered') {\n        $('#ordMatrix').removeClass('hidden');\n    } else {\n        $('#ordMatrix').addClass('hidden');\n    }\n\n    if (val === 'check') {\n        $('#thresoldDiv').removeClass('hidden');\n    } else {\n        $('#thresoldDiv').addClass('hidden');\n    }\n\n    // serpentine mode is only works for error dithering\n    if (['f-s', 'stuki', 'sierra', 'sierra-lite'].includes(val)) {\n        $('#serpBlock').removeClass('hidden');\n    } else {\n        $('#serpBlock').addClass('hidden');\n    }\n});\n\n$('#palInput').on('paste', (e) => {\n    let files = e.originalEvent.clipboardData.items;\n    let images = [];\n    for (let i = 0; i < files.length; i++) {\n        if (files[i].type.startsWith('image')) {\n            images.push(files[i].getAsFile());\n        };\n    }\n    if (!images.length) return;\n    e.preventDefault();\n\n    let image = images[0];\n\n    const reader = new FileReader();\n    reader.onload = function (ev) {\n        $('#palInput').val(t('[clipboard]'));\n        $('#palInput').data('source', 'dataURL');\n        const tempImage = new Image();\n        tempImage.onload = function () {\n            palImageChanged = true;\n\n            const tempCanvas = document.createElement(\"canvas\");\n            tempCanvas.width = tempImage.width;\n            tempCanvas.height = tempImage.height;\n            const clipCtx = tempCanvas.getContext(\"2d\");\n            clipCtx.drawImage(tempImage, 0, 0);\n            palUtils.dataURL = tempCanvas.toDataURL(\"image/png\");\n            converterPreload();\n        };\n        tempImage.src = ev.target.result;\n    };\n    reader.readAsDataURL(image);\n});\n\nlinkNumberRangeInputs($('#resizeXInput')[0], $('#resizeXRange')[0])\nlinkNumberRangeInputs($('#resizeYInput')[0], $('#resizeYRange')[0])\n\nfunction converterPreload(showWarn = true) {\n    let path = $('#palInput').val();\n    if ($('#palInput').data('source') !== 'dataURL') {\n        if (!path.length) {\n            return showWarn && toastr.error(t('Choose a image!'));\n        }\n\n        if (utils.isURLValid(path)) {\n            startPaletteConverter(path);\n        } else {\n            return showWarn && toastr.error(t('Invalid link!'));\n        }\n    } else {\n        startPaletteConverter(palUtils.dataURL);\n    }\n}\n\nfunction startPaletteConverter(url) {\n    clearImmediate(palUtils.converterInterval);\n\n    let tempImg = new Image();\n    tempImg.crossOrigin = 'anonymous';\n    tempImg.src = url;\n\n    tempImg.onload = () => {\n        let canvas = document.createElement('canvas');\n        canvas.width = tempImg.width;\n        canvas.height = tempImg.height;\n\n\n        let ctx = canvas.getContext('2d');\n        ctx.drawImage(tempImg, 0, 0);\n\n\n        if (palImageChanged) {\n            showResizeOptions();\n            palImageChanged = false;\n            $('#resizeXRange').attr('max', canvas.width * 2);\n            $('#resizeYRange').attr('max', canvas.height * 2);\n            $('#resizeXInput,#resizeXRange').val(canvas.width);\n            $('#resizeYInput,#resizeYRange').val(canvas.height);\n            $('#resizeXInput').data('ar', canvas.width / canvas.height);\n\n            $('#resizeAA').prop('checked', false);\n            $('#tryResizePixelArt').prop('checked', false);\n        } else {\n            let resizeWidth, resizeHeight;\n            let withAA = $('#resizeAA').is(':checked');\n\n            if ($('#tryResizePixelArt').is(':checked')) {\n                const { result, pixelSize } = isImagePixelArt(canvas);\n                if (!result) {\n                    toastr.warning(t('warn.notPixelArt'));\n                } else {\n                    resizeWidth = canvas.width / pixelSize;\n                    resizeHeight = canvas.height / pixelSize;\n                    withAA = false;\n\n                    // update inputs to reflect new sizes\n                    $('#resizeXInput,#resizeXRange').val(resizeWidth);\n                    $('#resizeYInput,#resizeYRange').val(resizeHeight);\n                }\n            }\n\n            if (!resizeWidth || !resizeHeight) {\n                resizeWidth = $('#resizeXInput').val();\n                resizeHeight = $('#resizeYInput').val();\n            }\n\n\n            canvas = resizeCanvas(canvas, resizeWidth, resizeHeight, withAA);\n            ctx = canvas.getContext('2d');\n        }\n\n        tempImg = null;\n\n        try {\n            var imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n        } catch (e) {\n            return toastr.error(t('Image is loaded, but pixels can not be shown. Try to load it on Imgur or download->upload from file'))\n        }\n\n        const contrast = +$('#colorAdj').val();\n        const brightness = +$('#brightAdj').val();\n        imgData = clrManip.adjustGamma(imgData, contrast, brightness);\n\n        const doNotConvert = $('#doNotConvert').is(':checked');\n\n        if (doNotConvert) {\n            ctx.putImageData(imgData, 0, 0);\n\n            onDone(canvas, 'palOut',\n                () => {\n                    toastr.info(t('onDone.didNotConvert'));\n                });\n            return;\n        }\n\n        palUtils.updatePalette();\n\n        const ditherer = palUtils.ditherer;\n        ditherer.usedColors.clear();\n\n        let convGen; // converterGenerator\n        switch ($('#ditheringMode').val()) {\n            case 'none':\n                convGen = ditherer.errorDiffusion(imgData);\n                break;\n            case 'f-s':\n                convGen = ditherer.errorDiffusion(imgData, errorDiffMatrices.floydSteinberg);\n                break;\n            case 'stuki':\n                convGen = ditherer.errorDiffusion(imgData, errorDiffMatrices.stuki);\n                break;\n            case 'sierra':\n                convGen = ditherer.errorDiffusion(imgData, errorDiffMatrices.sierraTwo);\n                break;\n            case 'check':\n                convGen = ditherer.checkboardDithering(imgData, palUtils);\n                break;\n            case 'ordered':\n                let matrix = $('#ordMatrixSelect').val();\n                let mode = $('#ordMatrixModeSelect').val();\n\n                if (mode == 'des') mode = 0;\n                else if (mode == 'asc') mode = 1;\n                else mode = 2;\n\n                let custom = false;\n                if (matrix.startsWith('c')) {\n                    custom = true;\n                    matrix = matrix.slice(1);\n                }\n\n                const bayerStrength = +$('#bayerAdj').val();\n                convGen = ditherer.orderedDithering(imgData, +matrix, custom, mode, bayerStrength);\n                break;\n            default:\n                toastr.warning('O_o');\n                return;\n        }\n\n\n        let startTime = Date.now();\n        const progressBar = $('#palLB>.barProgress');\n        progressBar.parent().parent().removeClass('opaque');\n        palUtils.converterInterval = setImmediate(function rec() {\n            let loaded = convGen.next();\n\n            if (loaded.done) {\n                progressBar.parent().parent().addClass('opaque');\n                progressBar.css('width', 0);\n                ctx.putImageData(imgData, 0, 0);\n                onDone(canvas, 'palOut',\n                    () => {\n                        toastr.success(`${t('Done in')} ${(Date.now() - startTime) / 1000}${t('s.')}`);\n                    });\n            } else {\n                let perc = loaded.value * 100;\n                if (perc > 97) perc = 100;\n                progressBar.css('width', perc + '%');\n                palUtils.converterInterval = setImmediate(rec);\n            }\n        });\n    }\n\n    tempImg.onerror = () => {\n        toastr.error('Unknown image loading error. Maybe CORS, so try to upload on Imgur')\n    }\n}\n\n$('#palThresold').on('change', () => {\n    palUtils.ditherPalette();\n    converterPreload();\n});\n$('#colorAdj').on('input', (e) => {\n    $('#colorAdjLabel').text(e.target.value);\n});\n$('#resetContrast').on('click', () => {\n    $('#colorAdj').val(0);\n    $('#colorAdjLabel').text(0);\n});\n\n$('#brightAdj').on('input', (e) => {\n    $('#brightAdjLabel').text(e.target.value);\n});\n$('#resetBrightness').on('click', () => {\n    $('#brightAdj').val(0);\n    $('#brightAdjLabel').text(0);\n});\n\n$('#bayerAdj').on('input', (e) => {\n    $('#bayerAdjLabel').text(e.target.value);\n});\n$('#bayerAdj').trigger('input');\n\ndocument.onkeydown = e => {\n    if (e.key === 'Enter' && !e.repeat) {\n        converterPreload();\n    }\n}\n\n// -----------------------------------------------\n// -----------------------------------------------\n// -----------------------------------------------\n// -----------------------------------------------\n// -----------------------------------------------\n\nlet patUtils = {\n    patterns: importedPatterns.patterns,\n    defaultPattern: importedPatterns.defaultPattern,\n    patternSize: Math.sqrt(importedPatterns.patterns[0].length),\n\n    usedColors: [],\n\n    patternsCans: [], // список картинок с паттернами для ускоренного рисования\n    async generatePatterns() {\n        this.patternsCans = [];\n        const patternSize = this.patternSize;\n        let pattern, ctx, color;\n        for (let i = 0; i < paletteRGB.length; i++) {\n            let canvas = document.createElement('canvas');\n            canvas.width = canvas.height = patternSize;\n\n\n            pattern = this.patterns[i % this.patterns.length];\n            color = paletteRGB[i];\n\n            ctx = canvas.getContext('2d');\n\n            ctx.fillStyle = `rgb(${color.join(',')})`;\n\n            for (let j = 0; j < pattern.length; j++) {\n                if (!pattern[j]) continue;\n\n                const x = j % patternSize,\n                    y = j / patternSize | 0;\n\n                ctx.fillRect(x, y, 1, 1);\n            }\n\n            this.patternsCans.push(await createImageBitmap(canvas));\n        }\n    },\n    drawPattern(ctx, pattern, startX, startY, color) {\n        let s = this.patternSize;\n        ctx.fillStyle = `rgb(${color.join(',')})`;\n        for (let x = 0; x < s; x++) {\n            for (let y = 0; y < s; y++) {\n                if (!pattern[x + y * s]) continue\n                ctx.fillRect(startX + x, startY + y, 1, 1);\n            }\n        }\n    },\n    // todo расширяемые паттерны\n    async * patternize(canvas) {\n        const ctx = canvas.getContext('2d');\n        const {\n            data: imgData,\n            width, height\n        } = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n\n        await this.generatePatterns();\n\n\n        const patternSize = this.patternSize;\n\n        const newWidth = width * patternSize;\n        const newHeight = height * patternSize;\n\n\n        // actual palette32 includes opacity, i don't need it\n        let palette32 = paletteRGB.map(c => (c[0] << 16) + (c[1] << 8) + c[2])\n        let colorMap = new Map();\n        palette32.forEach((el, i) => colorMap.set(el, i))\n\n        let color, colId, color32, pattern;\n\n        const CHUNK_SIZE = 500;\n        const CHUNKS_X = Math.ceil(width / CHUNK_SIZE);\n        const CHUNKS_Y = Math.ceil(height / CHUNK_SIZE);\n\n\n        const chunks = [];\n\n        let counter = 0;\n        for (let cx = 0; cx < CHUNKS_X; cx++) {\n            for (let cy = 0; cy < CHUNKS_Y; cy++) {\n                const startX = cx * CHUNK_SIZE;\n                const startY = cy * CHUNK_SIZE;\n                const endX = Math.min((cx + 1) * CHUNK_SIZE, width);\n                const endY = Math.min((cy + 1) * CHUNK_SIZE, height);\n\n                const chunkCanvas = document.createElement('canvas');\n                chunkCanvas.width = (endX - startX) * patternSize;\n                chunkCanvas.height = (endY - startY) * patternSize;\n\n                const chunkCtx = chunkCanvas.getContext('2d');\n\n\n                for (let x = startX; x < endX; x++) {\n                    for (let y = startY; y < endY; y++) {\n                        counter++;\n\n                        const i = (x + y * width) * 4;\n\n                        color = [imgData[i], imgData[i + 1], imgData[i + 2], imgData[i + 3]];\n                        if (color[3] !== 255) continue;\n\n                        color32 = (color[0] << 16) + (color[1] << 8) + color[2];\n\n                        colId = colorMap.get(color32);\n\n                        pattern = this.patternsCans[colId];\n\n                        const localX = (x - startX) * patternSize;\n                        const localY = (y - startY) * patternSize;\n                        if (pattern) {\n                            chunkCtx.drawImage(pattern, localX, localY);\n                        } else {\n                            this.drawPattern(chunkCtx, this.defaultPattern, localX, localY, color);\n                        }\n\n                        if (i % 3000 === 0) {\n                            yield counter / (imgData.length / 4)\n                        }\n                    }\n                }\n\n                chunks.push([\n                    cx, cy, chunkCanvas\n                ]);\n            }\n        }\n\n        let compositeCanvas = document.createElement('canvas');\n        compositeCanvas.width = newWidth;\n        compositeCanvas.height = newHeight;\n\n        const compCtx = compositeCanvas.getContext('2d');\n        for (const chunk of chunks) {\n            const [cx, cy, chunkCanvas] = chunk;\n            const offX = cx * CHUNK_SIZE * patternSize;\n            const offY = cy * CHUNK_SIZE * patternSize;\n\n            compCtx.drawImage(chunkCanvas, offX, offY);\n        }\n\n\n        // for (let i = 0; i < imgData.length; i += 4) {\n        //     if (imgData[i + 3] < 127) continue;\n\n        //     _i = i / 4;\n        //     imgX = _i % width;\n        //     imgY = _i / width | 0;\n\n        //     absX = imgX * patternSize;\n        //     absY = imgY * patternSize;\n\n        //     color = [imgData[i], imgData[i + 1], imgData[i + 2], imgData[i + 3]];\n        //     color32 = (color[0] << 16) + (color[1] << 8) + color[2];\n\n        //     colId = colorMap.get(color32);\n\n        //     pattern = this.patternsCans[colId];\n\n        //     if (pattern) {\n        //         ctx2.drawImage(pattern, absX, absY);\n        //     } else {\n        //         this.drawPattern(ctx2, this.defaultPattern, absX, absY, color)\n        //     }\n\n        //     console.log('cyc');\n        //     if (i % 2000 === 0) {\n        //         yield i / imgData.length\n        //     }\n        // }\n        //newCanvas.getContext('2d').putImageData(newImgData, 0, 0);\n\n        return compositeCanvas;\n    }\n}\n\n$('#patFolder').on('click', () => {\n    openImage(dataURL => {\n        $('#patInput').val(t('[file]'));\n        $('#patInput').data('source', 'dataURL');\n\n        patUtils.dataURL = dataURL;\n\n        patternPreload();\n    })\n})\n\n$('#patGOBtn').on('click', () => {\n    patternPreload();\n});\n\n$('#patInput').on('keydown', (e) => {\n    $('#patInput').data('source', 'url');\n    if (e.code === 'Enter') {\n        patternPreload();\n    }\n});\n\n$('#patInput').on('paste', (e) => {\n    let files = e.originalEvent.clipboardData.items;\n    let images = [];\n    for (let i = 0; i < files.length; i++) {\n        if (files[i].type.startsWith('image')) {\n            images.push(files[i].getAsFile());\n        };\n    }\n    if (!images.length) return;\n    e.preventDefault();\n\n    let image = images[0];\n\n    const reader = new FileReader();\n    reader.onload = function (ev) {\n        $('#patInput').val(t('[clipboard]'));\n        $('#patInput').data('source', 'dataURL');\n\n        const tempImage = new Image();\n        tempImage.onload = function () {\n            const tempCanvas = document.createElement(\"canvas\");\n            tempCanvas.width = tempImage.width;\n            tempCanvas.height = tempImage.height;\n            const clipCtx = tempCanvas.getContext(\"2d\");\n            clipCtx.drawImage(tempImage, 0, 0);\n            patUtils.dataURL = tempCanvas.toDataURL(\"image/png\");\n            patternPreload();\n        };\n        tempImage.src = ev.target.result;\n    };\n    reader.readAsDataURL(image);\n})\n\nfunction patternPreload() {\n    let path = $('#patInput').val();\n    if ($('#patInput').data('source') !== 'dataURL') {\n        if (!path.length) {\n            return toastr.error(t('Choose a image!'));\n        }\n\n        if (utils.isURLValid(path) && utils.isURLImage(path)) {\n            patternatorStart(path);\n        } else {\n            return toastr.error(t('Invalid link!'));\n        }\n    } else {\n        patternatorStart(patUtils.dataURL);\n    }\n}\n\nfunction patternatorStart(url) {\n    clearImmediate(patUtils.converterInterval);\n\n    let tempImg = new Image();\n    tempImg.crossOrigin = 'anonymous';\n    tempImg.src = url;\n\n    tempImg.onload = () => {\n        let canvas = document.createElement('canvas');\n        canvas.width = tempImg.width;\n        canvas.height = tempImg.height;\n\n        if (canvas.width > 800 || canvas.height > 800) {\n            //toastr.warning('Image is wider than 800px, this can crash the page');\n        }\n\n        let ctx = canvas.getContext('2d');\n        ctx.drawImage(tempImg, 0, 0);\n\n        try {\n            ctx.getImageData(0, 0, 1, 1);\n        } catch (e) {\n            return toastr.error(t('Image is loaded, but pixels can not be gotten. Try to load it on Imgur or download->upload from file'))\n        }\n\n        toastr.warning(t('If your image is big, go make a tea and watch Doctor Who'));\n        let convGen = patUtils.patternize(canvas);\n\n\n\n        let toast = toastr.info(`(0%)`, \"PATTERN\", {\n            timeOut: 0,\n            extendedTimeOut: 0,\n            closeButton: true,\n            tapToDismiss: false\n        });\n\n        let startTime = Date.now();\n        patUtils.converterInterval = setTimeout(async function rec() {\n            let loaded = await convGen.next();\n\n            if (toast && toast.find('.toast-message').length) {\n                toast.find('.toast-message').text(`${(loaded.value * 100) | 0}%`);\n            }\n\n            if (loaded.done) {\n                toast.remove();\n                onDone(loaded.value, 'patOut',\n                    () => {\n                        toastr.success(`${t('Done in')} ${(Date.now() - startTime) / 1000}s.`);\n                    });\n            } else {\n                patUtils.converterInterval = setTimeout(rec);\n            }\n        });\n    }\n\n    tempImg.onerror = () => {\n        toastr.error(t('Unknown image loading error. Maybe CORS, so try to upload on Imgur'))\n    }\n}\n\nfunction createImgData(width, height) {\n    let tempCanvas = document.createElement('canvas');\n\n    let newImgData = tempCanvas.getContext('2d').createImageData(width, height);\n    tempCanvas = null;\n\n    return newImgData\n}\n\nasync function copyCanvasToClipboard(canvas) {\n    const blob = await new Promise(res => canvas.toBlob(res));\n    const item = new ClipboardItem({ \"image/png\": blob });\n    navigator.clipboard.write([item]);\n}\n\nasync function copyToClipboard(text) {\n    await navigator.clipboard.writeText(text);\n}\n\nfunction downloadCanvas(canvas) {\n    const link = document.createElement('a');\n    link.download = 'filename.png';\n    link.href = canvas.toDataURL()\n    link.click();\n}\n\nasync function showUploadPrompt(palettizedCanvas) {\n    return new Promise((res, rej) => {\n        try {\n            const prompt = $('<div class=\"upload-prompt\"></div>');\n            const thumbCanvas = document.createElement('canvas');\n            const thumbCtx = thumbCanvas.getContext('2d');\n\n            let thumbWidth, thumbHeight;\n            if (palettizedCanvas.width > palettizedCanvas.height) {\n                thumbWidth = 50;\n                thumbHeight = Math.round((palettizedCanvas.height / palettizedCanvas.width) * 50);\n            } else {\n                thumbHeight = 50;\n                thumbWidth = Math.round((palettizedCanvas.width / palettizedCanvas.height) * 50);\n            }\n\n            thumbCanvas.width = 50;\n            thumbCanvas.height = 50;\n\n            thumbCtx.clearRect(0, 0, 50, 50);\n            thumbCtx.drawImage(\n                palettizedCanvas,\n                (50 - thumbWidth) / 2,\n                (50 - thumbHeight) / 2,\n                thumbWidth,\n                thumbHeight\n            );\n\n            const thumbImg = $('<img>').attr('src', thumbCanvas.toDataURL());\n\n\n            const namesSelect = $(`<select style=\"margin-right: 3px;\"/>`)\n                .addClass('template-names');\n\n            const nameInput = $(`<input type=\"text\" placeholder=\"${t('template_name_desc')}\">`)\n                .addClass('template-name');\n\n            const namesContainer = $('<div/>');\n            namesContainer.append(namesSelect, nameInput);\n\n            const patternContainer = $('<div class=\"checkbox-container\"></div>');\n            const patternCheckbox = $('<input type=\"checkbox\" id=\"convertToPattern\" checked>')\n                .addClass('pattern-checkbox');\n            const patternLabel = $(`<label for=\"convertToPattern\">${t('template_patternize')}</label>`);\n            patternContainer.append(patternCheckbox, patternLabel);\n\n            const publicContainer = $('<div class=\"checkbox-container\"></div>');\n            const publicCheckbox = $('<input type=\"checkbox\" id=\"isPublicTemplate\">')\n                .addClass('public-checkbox');\n            const publicLabel = $(`<label for=\"isPublicTemplate\">${t('template_is_public')}</label>`);\n            publicContainer.append(publicCheckbox, publicLabel);\n\n            const confirmButton = $(`<button>${t('upload_to_goroxels')}</button>`).addClass('confirm-upload');\n            prompt.append(thumbImg, namesContainer, patternContainer, publicContainer, confirmButton);\n            $('body').append(prompt);\n\n            async function onConfirmClick() {\n                confirmButton.prop('disabled', true);\n\n                const templateName = nameInput.val().trim();\n                if (templateName.length < 3 || templateName.length > 32) {\n                    toastr.error(t('template_name_shit'));\n                    return;\n                }\n\n                try {\n                    const formData = new FormData();\n                    const thumbBlob = await new Promise((resolve, reject) => {\n                        thumbCanvas.toBlob(b => b ? resolve(b) : reject(new Error(\"Failed to create thumbnail\")), 'image/png');\n                    });\n                    formData.append('thumb', thumbBlob, 'thumbnail.png');\n\n                    let patternCanvas = palettizedCanvas, patternized = false;\n                    if (patternCheckbox.is(':checked')) {\n                        if (!patUtils || typeof patUtils.patternize !== \"function\") {\n                            throw new Error(\"Patternize utility not available\");\n                        }\n\n                        let toast = toastr.info(`(0%)`, \"PATTERN\", {\n                            timeOut: 0,\n                            extendedTimeOut: 0,\n                            closeButton: true,\n                            tapToDismiss: false\n                        });\n\n                        patternized = true;\n\n                        const patternGen = patUtils.patternize(palettizedCanvas);\n                        let patternResult;\n                        while (!(patternResult = await patternGen.next()).done) {\n                            await sleep(0);\n                            if (toast && toast.find('.toast-message').length) {\n                                toast.find('.toast-message').text(`${(patternResult.value * 100) | 0}%`);\n                            }\n                        }\n                        toast.remove();\n\n                        patternCanvas = patternResult.value;\n                    }\n\n                    const patternBlob = await new Promise((resolve, reject) => {\n                        patternCanvas.toBlob(b => b ? resolve(b) : reject(new Error(\"Failed to create pattern\")), 'image/png');\n                    });\n                    formData.append('pattern', patternBlob, 'pattern.png');\n\n                    const isPublic = publicCheckbox.is(':checked');\n\n                    let url = `/api/template/add?name=${encodeURIComponent(templateName)}&public=${isPublic}`;\n                    if (patternized) {\n                        url += `&width=${palettizedCanvas.width}`;\n                    }\n\n                    const response = await fetch(url, {\n                        method: 'POST',\n                        body: formData,\n                        credentials: 'include'\n                    });\n\n                    if (!response.ok) throw new Error(`HTTP ${response.status}`);\n                    const result = await response.json();\n\n                    if (result.errors) {\n                        processApiErrors(result.errors);\n                        return;\n                    }\n\n                    toastr.success('Template uploaded successfully!');\n                    prompt.remove();\n                    res(result);\n\n                } catch (error) {\n                    confirmButton.removeAttr('disabled');\n\n                    toastr.error('Upload failed: ' + error.message);\n                    rej(error);\n                }\n            }\n\n            confirmButton.on('click', onConfirmClick);\n\n            fetch(`/api/template/list?self=1`, {\n                credentials: 'include'\n            }).then(async response => {\n                const result = await response.json();\n\n                if (result.errors) {\n                    if (result.errors[0] === 'Not permitted') {\n                        toastr.warning(t('you_need_login_to_use_this_feature'));\n                        prompt.remove();\n                        return;\n                    }\n                    processApiErrors(result.errors);\n                    return;\n                }\n\n                const templates = result;\n\n                for (const template of templates) {\n                    const option = $(`<option value=\"${template.name}\">${template.name}</option>`);\n                    namesSelect.append(option);\n                }\n\n                namesSelect.on('change', () => {\n                    nameInput.val(namesSelect.val());\n                })\n            }).catch(toastr.error);\n\n        } catch (err) {\n            rej(err);\n        }\n    });\n}\n\n\nfunction onDone(canvas, convClass, callback) {\n    $(`#${convClass} > *`).remove();\n\n    canvas.className = 'outputImg';\n\n    const zoomChecked = $('#autoZoom')[0].checked;\n\n    let newImg = document.createElement('img');\n    newImg.className = 'outputImg' + (zoomChecked ? ' zoomed' : '');\n    newImg.src = canvas.toDataURL();\n    if (!zoomChecked) newImg.style.width = Math.min(canvas.width, parseInt($(`#${convClass}`).css('width')) / 2) + 'px';\n\n    $(`#${convClass}`)[0].appendChild(newImg);\n\n    $(`#${convClass}`).append(\n        `<div class=\"afterImage\">\n            <div class=\"line\"><button class=\"uploadButton\"> ${t('Upload on imgur!')}</button></div>\n            ${convClass === 'palOut' ? `<div class=\"line\"><button class=\"uploadGrokselsButton\">${t('upload_to_goroxels')}</button></div>` : ''}\n            <div class=\"line\"><span class=\"uploadedUrl\"></span></div>\n            ${convClass === 'patOut' ? `<div class=\"line\">${t('Final image size:')} ${canvas.width}x${canvas.height}</div>` : ''}\n            <div class=\"line\"><button class=\"copyToClipButton\">${t('copy_canvas_btn')}</button></div>\n            <div class=\"line\"><button class=\"downloadButton\">${t('download_canvas_btn')}</button></div>\n        </div>`\n    );\n    imgZoom.createZoomHandler($(`#${convClass}`).children(0)[0]);\n\n    $(`#${convClass} .uploadButton`).one('click', async () => {\n        $(`#${convClass} .uploadedUrl`).text('Uploading...');\n\n        try {\n            const link = await upload(canvas.toDataURL().split(\",\")[1]);\n            const isPNG = link.endsWith('png');\n            if (!isPNG) {\n                toastr.warn('JPEG!!!');\n                throw new Error;\n            }\n\n            $(`#${convClass} .uploadedUrl`).html(\n                `<span style=\"color:rgb(0, 190, 0)\">${link}${convClass === 'patOut' ? `?width=${canvas.width / 7}` : ''}</span>`\n            )\n        } catch {\n            const text = t('Imgur upload failed, try upload manually');\n            let html;\n            if (convClass === 'patOut') {\n                html = `${text}<br><input id=\"patternLinkGenerator\" placeholder=\"${t('insert_link_here')}\">&nbsp;<span id=\"patternLink\"></span>`;\n                setTimeout(() => {\n                    const span = $('#patternLink');\n                    $('#patternLinkGenerator').on('input', e => {\n                        const input = e.target;\n                        let link = input.value;\n                        input.style.backgroundColor = '';\n\n                        if (link.includes('imgur') && !link.endsWith('.png')) {\n                            if (link.includes('/a/')) {\n                                input.style.backgroundColor = 'red';\n                                return span.text(t('imgur_album_link'))\n                            }\n\n                            link += '.png';\n                        }\n\n                        link += `?width=${canvas.width / 7}`;\n\n                        span.text(link);\n                    })\n                })\n            } else {\n                html = text;\n            }\n\n            $(`#${convClass} .uploadedUrl`).html(html)\n        }\n    });\n\n    $(`#${convClass} .copyToClipButton`).one('click', () => {\n        copyCanvasToClipboard(canvas)\n            .then(() => toastr.success(t('img_copied_success')));\n    });\n\n    $(`#${convClass} .downloadButton`).one('click', () => {\n        downloadCanvas(canvas)\n    });\n\n    if (convClass === 'palOut') {\n        $(`#${convClass} .uploadGrokselsButton`).one('click', () => {\n            $(`#${convClass} .uploadGrokselsButton`).prop('disabled', true);\n\n            showUploadPrompt(canvas).then(template => {\n                if (template === null || template === undefined) {\n                    return;\n                }\n                const filePath = template.file;\n                $(`#${convClass} .uploadedUrl`).text(`GRX/?f=${filePath}&w=${canvas.width}`);\n            });\n        });\n    }\n\n    $(`#${convClass} .uploadedUrl`).on('click', (e) => {\n        copyToClipboard(e.target.innerText).then(() => toastr.success(t('conv.url_copied_success')));\n    });\n\n    callback();\n}\n\n$('#aspectRatioLock').on('click', e => {\n    const btn = e.target;\n    if (btn.classList.contains('active')) {\n        btn.classList.remove('active');\n        resizeKeepAspectRatio = false;\n    } else {\n        btn.classList.add('active');\n        resizeKeepAspectRatio = true;\n    }\n})\n\nfunction showResizeOptions() {\n    $('#resizeXInput,#resizeYInput').parent().removeClass('hidden');\n}\n\n// listeners to keep aspect ratio\n$('#resizeXInput,#resizeXRange').on('input', e => {\n    // to prevent infinite cycle of input events\n    if (!e.originalEvent?.isTrusted || !resizeKeepAspectRatio) return;\n    const newWidth = e.target.value\n\n    const ar = parseFloat($('#resizeXInput').data('ar'));\n    const newHeight = Math.floor(newWidth / ar);\n    $('#resizeYInput,#resizeYRange').val(newHeight);\n});\n$('#resizeYInput,#resizeYRange').on('input', e => {\n    if (!e.originalEvent?.isTrusted || !resizeKeepAspectRatio) return;\n    const newHeight = e.target.value\n\n    const ar = parseFloat($('#resizeXInput').data('ar'));\n    const newWidth = Math.floor(newHeight * ar);\n    $('#resizeXInput,#resizeXRange').val(newWidth);\n});\n\n$('#colorfunc').on('change', () => {\n    palUtils.ditherer.setColorFunc($('#colorfunc').val());\n    palUtils.ditherPalette();\n    converterPreload(false);\n});\n\n\n\nlet palName = localStorage.getItem('converterPalette') ?? 'goroxels1';\napplyPalettes(palName);\n\n// palUtils\npalUtils.updatePalette();\nvisualizePalette();\npalUtils.ditherer = new Ditherer(paletteRGB, $('#colorfunc').val());","export default {\r\n    //      X   7\r\n    //  3   5   1\r\n    floydSteinberg: [\r\n        [7 / 16, 1, 0],\r\n        [3 / 16, -1, 1],\r\n        [5 / 16, 0, 1],\r\n        [1 / 16, 1, 1]\r\n    ],\r\n    //          X   8   4 \r\n    //  2   4   8   4   2\r\n    //  1   2   4   2   1\r\n    stuki: [\r\n        [8 / 42, 1, 0],\r\n        [4 / 42, 2, 0],\r\n        [2 / 42, -2, 1],\r\n        [4 / 42, -1, 1],\r\n        [8 / 42, 0, 1],\r\n        [4 / 42, 1, 1],\r\n        [2 / 42, 2, 1],\r\n        [1 / 42, -2, 2],\r\n        [2 / 42, -1, 2],\r\n        [4 / 42, 0, 2],\r\n        [2 / 42, 1, 2],\r\n        [1 / 42, 2, 2],\r\n    ],\r\n    //          X   4   3\r\n    //  1   2   3   2   1\r\n    sierraTwo: [\r\n        [4 / 16, 1, 0],\r\n        [3 / 16, 2, 0],\r\n        [1 / 16, -2, 1],\r\n        [2 / 16, -1, 1],\r\n        [3 / 16, 0, 1],\r\n        [2 / 16, 1, 1],\r\n        [1 / 16, 2, 1],\r\n    ],\r\n}","// https://stackoverflow.com/questions/3582671/how-to-open-a-local-disk-file-with-javascript\n// copied and edited\n\nfunction clickElem(elem) {\n    // Thx user1601638 on Stack Overflow (6/6/2018 - https://stackoverflow.com/questions/13405129/javascript-create-and-save-file )\n    var eventMouse = document.createEvent(\"MouseEvents\")\n    eventMouse.initMouseEvent(\"click\", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)\n    elem.dispatchEvent(eventMouse)\n}\n\nfunction openImage(callback) {\n    const readFile = function (e) {\n        document.body.removeChild(fileInput);\n\n        var file = e.target.files[0];\n        if (!file) return;\n\n        var reader = new FileReader();\n        reader.onload = function () {\n            callback(reader.result);\n        }\n        reader.readAsDataURL(file);\n    }\n    const fileInput = document.createElement(\"input\");\n    fileInput.type = 'file';\n    fileInput.accept = 'image/png';\n    fileInput.style.display = 'none';\n    fileInput.onchange = readFile;\n    document.body.appendChild(fileInput);\n    clickElem(fileInput);\n}\n\nexport default openImage","let palettes = {\n    goroxels1: [\n        [255, 255, 255],\n        [180, 180, 180],\n        [133, 133, 133],\n        [90, 90, 90],\n        [61, 61, 61],\n        [30, 30, 30],\n        [19, 19, 19],\n        [0, 0, 0],\n        [14, 7, 27],\n        [26, 25, 50],\n        [42, 47, 78],\n        [66, 76, 110],\n        [101, 115, 146],\n        [146, 161, 185],\n        [216, 220, 255],\n        [187, 254, 255],\n        [12, 241, 255],\n        [0, 205, 249],\n        [0, 172, 237],\n        [0, 152, 220],\n        [0, 105, 170],\n        [0, 57, 109],\n        [3, 25, 63],\n        [28, 20, 67],\n        [37, 27, 90],\n        [56, 42, 115],\n        [88, 56, 143],\n        [133, 72, 202],\n        [168, 113, 231],\n        [255, 173, 225],\n        [228, 109, 230],\n        [202, 72, 202],\n        [146, 220, 186],\n        [93, 175, 141],\n        [50, 132, 100],\n        [35, 103, 78],\n        [36, 82, 59],\n        [26, 122, 62],\n        [20, 160, 46],\n        [89, 193, 53],\n        [156, 219, 67],\n        [185, 228, 90],\n        [255, 235, 87],\n        [255, 200, 37],\n        [255, 162, 20],\n        [237, 118, 20],\n        [234, 89, 22],\n        [195, 64, 3],\n        [57, 31, 33],\n        [93, 44, 40],\n        [138, 72, 54],\n        [191, 111, 74],\n        [230, 156, 105],\n        [246, 202, 159],\n        [255, 223, 191],\n        [246, 129, 135],\n        [245, 85, 93],\n        [234, 50, 60],\n        [196, 36, 48],\n        [137, 30, 43],\n        [87, 28, 39],\n        [59, 20, 67],\n        [98, 36, 97],\n        [147, 56, 143]\n    ],\n    goroxels2: [[46, 34, 47], [62, 53, 70], [98, 85, 101], [150, 108, 108], [171, 148, 122], [105, 79, 98], [127, 112, 138], [155, 171, 178], [199, 220, 208], [255, 255, 255], [110, 39, 39], [179, 56, 49], [234, 79, 54], [245, 125, 74], [174, 35, 52], [232, 59, 59], [251, 107, 29], [247, 150, 23], [249, 194, 43], [122, 48, 69], [158, 69, 57], [205, 104, 61], [230, 144, 78], [251, 185, 84], [76, 62, 36], [103, 102, 51], [162, 169, 71], [213, 224, 75], [251, 255, 134], [22, 90, 76], [35, 144, 99], [30, 188, 115], [145, 219, 105], [205, 223, 108], [49, 54, 56], [55, 78, 74], [84, 126, 100], [146, 169, 132], [178, 186, 144], [11, 94, 101], [11, 138, 143], [14, 175, 155], [48, 225, 185], [143, 248, 226], [50, 51, 83], [72, 74, 119], [77, 101, 180], [77, 155, 230], [143, 211, 255], [69, 41, 63], [107, 62, 117], [144, 94, 169], [168, 132, 243], [234, 173, 237], [117, 60, 84], [162, 75, 111], [207, 101, 127], [237, 128, 153], [131, 28, 93], [195, 36, 84], [240, 79, 120], [246, 129, 129], [252, 167, 144], [253, 203, 176]],\n    pixelzone: [\n        [38, 38, 38],\n        [0, 0, 0],\n        [128, 128, 128],\n        [255, 255, 255],\n        [153, 98, 61],\n        [255, 163, 200],\n        [207, 115, 230],\n        [128, 0, 128],\n        [229, 0, 0],\n        [229, 137, 0],\n        [229, 229, 0],\n        [150, 230, 70],\n        [0, 190, 0],\n        [0, 230, 230],\n        [0, 136, 204],\n        [0, 0, 230]\n    ],\n    pixelplanet: [\n        [255, 255, 255],\n        [228, 228, 228],\n        [196, 196, 196],\n        [136, 136, 136],\n        [78, 78, 78],\n        [0, 0, 0],\n        [244, 179, 174],\n        [255, 167, 209],\n        [255, 84, 178],\n        [255, 101, 101],\n        [229, 0, 0],\n        [154, 0, 0],\n        [254, 164, 96],\n        [229, 149, 0],\n        [160, 106, 66],\n        [96, 64, 40],\n        [245, 223, 176],\n        [255, 248, 137],\n        [229, 217, 0],\n        [148, 224, 68],\n        [2, 190, 1],\n        [104, 131, 56],\n        [0, 101, 19],\n        [202, 227, 255],\n        [0, 211, 221],\n        [0, 131, 199],\n        [0, 0, 234],\n        [25, 25, 115],\n        [207, 110, 228],\n        [130, 0, 128],\n    ],\n    pixelplace: [\n        [255, 255, 255],\n        [196, 196, 196],\n        [136, 136, 136],\n        [34, 34, 34],\n        [255, 167, 209],\n        [229, 0, 0],\n        [229, 149, 0],\n        [160, 106, 66],\n        [229, 217, 0],\n        [148, 224, 68],\n        [2, 190, 1],\n        [0, 211, 221],\n        [0, 131, 199],\n        [0, 0, 234],\n        [207, 110, 228],\n        [130, 0, 128],\n        [255, 223, 204],\n        [85, 85, 85],\n        [0, 0, 0],\n        [236, 8, 236],\n        [107, 0, 0],\n        [255, 57, 4],\n        [99, 60, 31],\n        [81, 225, 25],\n        [0, 102, 0],\n        [54, 186, 255],\n        [4, 75, 255]\n    ],\n    wplaceFree: [[0, 0, 0], [60, 60, 60], [120, 120, 120], [210, 210, 210], [255, 255, 255], [96, 0, 24], [237, 28, 36], [255, 127, 39], [246, 170, 9], [249, 221, 59], [255, 250, 188], [14, 185, 104], [19, 230, 123], [135, 255, 94], [12, 129, 110], [16, 174, 166], [19, 225, 190], [40, 80, 158], [64, 147, 228], [96, 247, 242], [107, 80, 246], [153, 177, 251], [120, 12, 153], [170, 56, 185], [224, 159, 249], [203, 0, 122], [236, 31, 128], [243, 141, 169], [104, 70, 52], [149, 104, 42], [248, 178, 119]],\n    wplacePremium: [[0, 0, 0], [60, 60, 60], [120, 120, 120], [210, 210, 210], [255, 255, 255], [96, 0, 24], [237, 28, 36], [255, 127, 39], [246, 170, 9], [249, 221, 59], [255, 250, 188], [14, 185, 104], [19, 230, 123], [135, 255, 94], [12, 129, 110], [16, 174, 166], [19, 225, 190], [40, 80, 158], [64, 147, 228], [96, 247, 242], [107, 80, 246], [153, 177, 251], [120, 12, 153], [170, 56, 185], [224, 159, 249], [203, 0, 122], [236, 31, 128], [243, 141, 169], [104, 70, 52], [149, 104, 42], [248, 178, 119], [170, 170, 170], [165, 14, 30], [250, 128, 114], [228, 92, 26], [214, 181, 148], [156, 132, 49], [197, 173, 49], [232, 212, 95], [74, 107, 58], [90, 148, 74], [132, 197, 115], [15, 121, 159], [187, 250, 242], [125, 199, 255], [77, 49, 184], [74, 66, 132], [122, 113, 196], [181, 174, 241], [219, 164, 99], [209, 128, 81], [255, 197, 165], [155, 82, 73], [209, 128, 120], [250, 182, 164], [123, 99, 82], [156, 132, 107], [51, 57, 65], [109, 117, 141], [179, 185, 209], [109, 100, 63], [148, 140, 107], [205, 197, 158]]\n};\npalettes['goroxels1+2 (EXPERT)'] = [...palettes.goroxels1, ...palettes.goroxels2];\n\nasync function loadConfig() {\n    const resp = await fetch('/config.json');\n    return await resp.json();\n}\n\nexport async function loadGamePalettes() {\n    try {\n        const config = await loadConfig();\n        config.canvases.forEach(canvas => {\n            palettes['game.' + canvas.name] = canvas.palette;\n        });\n    } catch (e) {\n        toastr.warning('Failed to load game palettes')\n    }\n}\n\n\nexport default palettes","export function resizeCanvas(canvas, width, height, antiAliasing = true) {\n    width = Math.max(0, Math.floor(Number(width) || 0));\n    height = Math.max(0, Math.floor(Number(height) || 0));\n    const dpr = window.devicePixelRatio || 1;\n    const targetRatio = antiAliasing ? dpr : 1;\n\n    const prevW = canvas.width;\n    const prevH = canvas.height;\n\n    const copyCanvas = document.createElement(\"canvas\");\n    copyCanvas.width = Math.max(1, prevW);\n    copyCanvas.height = Math.max(1, prevH);\n    const copyCtx = copyCanvas.getContext(\"2d\");\n    if (prevW && prevH) {\n        copyCtx.drawImage(canvas, 0, 0);\n    }\n\n    canvas.style.width = width + \"px\";\n    canvas.style.height = height + \"px\";\n    canvas.width = Math.max(1, Math.round(width * targetRatio));\n    canvas.height = Math.max(1, Math.round(height * targetRatio));\n\n    const ctx = canvas.getContext(\"2d\");\n    ctx.imageSmoothingEnabled = !!antiAliasing;\n    if (\"imageSmoothingQuality\" in ctx) {\n        ctx.imageSmoothingQuality = antiAliasing ? \"high\" : \"low\";\n    }\n    ctx.setTransform(targetRatio, 0, 0, targetRatio, 0, 0);\n\n    if (prevW && prevH) {\n        ctx.drawImage(copyCanvas, 0, 0, copyCanvas.width, copyCanvas.height,\n            0, 0, width, height);\n    }\n    return ctx.canvas;\n}\n\n// searches for pixel chunks and automatically\n// determines them zoom\nexport function isImagePixelArt(canvas) {\n    const ctx = canvas.getContext(\"2d\");\n    const img = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    const d = img.data;\n\n    const maxSize = 10;\n    let supposedSize = 0;\n    let confirms = 0;\n    const maxBound = Math.min(img.width, img.height);\n\n    let curSize = 0;\n    let lastSize = 0;\n    let lastSizeCombos = 0;\n    let lastCol = -1;\n\n    let result = false;\n    let pixelSize = 1;\n\n    const encodeClr = (r, g, b) => (r << 16) | (g << 8) | b;\n\n    for (let diagonale = 0; diagonale < maxBound; diagonale++) {\n        const idx = (diagonale + diagonale * img.width) * 4;\n        const curCol = encodeClr(d[idx], d[idx + 1], d[idx + 2]);\n\n        curSize += 1;\n\n        if (curCol !== lastCol) {\n            lastCol = curCol;\n\n            if (curSize === lastSize && lastSize > 0) {\n                lastSizeCombos++;\n\n                if (lastSizeCombos >= 1) {\n                    if (confirms > 0) {\n                        if (confirms >= 1) {\n                            result = true;\n                            pixelSize = supposedSize;\n                            return { result, pixelSize };\n                        } else {\n                            const div = img.width % supposedSize;\n                            if (supposedSize !== lastSize || div !== 0) {\n                                return { result: false, pixelSize: 1 };\n                            }\n                        }\n                    }\n\n                    lastSizeCombos = 0;\n                    confirms++;\n                    supposedSize = lastSize;\n                    lastSize = 0;\n                }\n            } else {\n                if (\n                    curSize < maxSize &&\n                    curSize > 1 &&\n                    (curSize < lastSize * 2 || lastSize === 0)\n                ) {\n                    lastSize = curSize;\n                }\n                if (lastSize && curSize === 1) {\n                    return { result: false, pixelSize: 1 };\n                }\n            }\n\n            curSize = 0;\n        }\n    }\n\n    return { result: false, pixelSize: 1 };\n}\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"converters\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkgoroxels_client\"] = self[\"webpackChunkgoroxels_client\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendors\",\"penis\"], () => (__webpack_require__(\"./src/js/convert/main.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":[],"ignoreList":[],"sourceRoot":""}